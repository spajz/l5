<?php $__env->startSection('content'); ?>

    <div class="row">
        <div class="col-xs-12">
            <h1 class="page-header">
                <i class="fa <?php echo e(modules()[$moduleLower]['icon']); ?> fa-fw"></i> <?php echo e(isset($moduleTitle) ? $moduleTitle : $moduleUpper); ?> Edit
            </h1>
        </div>
    </div>

    <div id="pjax-container">

    <div class="row">
        <div class="col-xs-12">
            <p><?php echo isset($translateButtons) ? $translateButtons : ''; ?></p>
        </div>
    </div>

    <ul class="nav nav-tabs tab-selector bottom10">
        <li class="<?php echo e(Session::get('settings.tab') == '#basic' ? 'active' : ''); ?>"><a href="#basic"><i class="fa fa-bars fa-fw"></i>Basic</a></li>
        <li class="<?php echo e(Session::get('settings.tab') == '#content' ? 'active' : ''); ?>"><a href="#content"><i class="fa fa-folder-open-o fa-fw"></i> Content</a></li>
    </ul>

    <div id="basic">

        <div id="info-box"><?php echo Notification::showAll(); ?></div>

        <?php echo Former::open_for_files()->route("admin.{$moduleLower}.update", $item->id)->method('put')->data_pjax()->rules($validationRules); ?>


        <div class="row">
            <div class="col-xs-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Basic Information
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-xs-12">

                                <?php echo Former::hidden('id'); ?>


                                <?php echo Former::text('lang')->disabled()->forceValue($lang); ?>


                                <?php echo Former::text('title'); ?>


                                <?php echo Former::text('sub_title'); ?>


                                <?php echo Former::text('slug'); ?>


                                <?php echo Former::textarea('intro')->addClass('ckeditor'); ?>


                                <?php echo Former::textarea('description')->addClass('ckeditor'); ?>


                                <?php echo Former::hidden('featured')->forceValue(0); ?>

                                <?php echo Former::checkbox('featured')->value(1); ?>


                                <?php echo Former::hidden('status')->forceValue(0); ?>

                                <?php echo Former::checkbox('status')->value(1); ?>


                                <?php echo isset($formButtons) ? $formButtons : ''; ?>


                            </div>
                            <!-- /.col-xs-12 -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-xs-12 -->
        </div>

        <?php echo $__env->make("admin::_partials.images_form", ['item' => $item], array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

        <?php echo Former::close(); ?>


        <?php if(array_get($config, 'image.crop')): ?>
            <?php echo $__env->make("admin::_partials.crop_form", ['item' => $item], array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
        <?php endif; ?>
    </div>

    <div id="content">

        <div id="info-box"><?php echo Notification::showAll(); ?></div>

        <div class="row">
            <div class="col-xs-12">
                <?php echo Form::open(); ?>

                <div class="form-group">
                    <?php echo Form::select('elements', $elements, null, array('class' => 'select2 add-element', 'data-module' => $moduleLower)); ?>

                    <?php echo Form::submit('Add', array('class' => 'btn btn-primary  add-element-btn')); ?>

                </div>
                <?php echo Form::close(); ?>

            </div>
        </div>

        <?php echo Former::open_for_files()->route("admin.{$moduleLower}.item.content.update2", $item->id)
        ->method('put')
        ->id('module-content-form')
        ->addClass('content-sortable')
        ->data_model('\App\Models\Content')
        ->data_pjax(); ?>

        <?php echo Former::hidden('model_type')->value($modelName); ?>


        <?php echo Former::hidden('lang')->value(session('settings.language')); ?>


        <div class="content-form-box">

            <?php if($contents): ?>

                <?php foreach($contents as $item): ?>

                    <?php echo $__env->make("admin::_partials.content.template", ['item' => $item, 'type' => $item->type], array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

                <?php endforeach; ?>

            <?php endif; ?>

        </div>

        <?php echo isset($formButtons) ? $formButtons : Former::submit('Submit')->addClass('btn-success bottom10')->value('Save'); ?>


        <?php echo Former::hidden('_token')->value(csrf_token()); ?>


        <?php echo Former::close(); ?>


        <?php $__env->startSection('crop_form'); ?>
        <?php echo $__env->yieldSection(); ?>

    </div>

    </div>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts_bottom'); ?>
    @parent

    <script type="text/javascript">
        var dialog;
        function openCustomRoxy2(id){
            dialog = $('#' + id).dialog({modal:true, width:875,height:600});
        }
        function closeCustomRoxy2(){
//            $('#roxyCustomPanel2').dialog('close');
            dialog.dialog('close');
        }
    </script>

<?php $__env->stopSection(); ?>
<?php echo $__env->make($layout, array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>