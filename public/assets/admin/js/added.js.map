{"version":3,"sources":["added.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"added.js","sourcesContent":["// Add csrf token to all ajax calls\r\n$.ajaxSetup({\r\n    headers: {\r\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    },\r\n    beforeSend: function () {\r\n        $('.ajax-loader').show();\r\n    },\r\n    complete: function () {\r\n        $('.ajax-loader').hide();\r\n    }\r\n});\r\n\r\n// Bootstrap file button\r\n$(document).on('change', '.btn-file :file', function () {\r\n    var input = $(this),\r\n        numFiles = input.get(0).files ? input.get(0).files.length : 1,\r\n        label = input.val().replace(/\\\\/g, '/').replace(/.*\\//, '');\r\n    input.trigger('fileselect', [numFiles, label]);\r\n});\r\n\r\n// Sort array by property   sortByProperty(myArray, \"name\");\r\nfunction sortByProperty(array, propertyName) {\r\n    return array.sort(function (a, b) {\r\n        return a[propertyName] - b[propertyName];\r\n    });\r\n}\r\n\r\n// Ajax loader\r\nfunction loaderShow() {\r\n    $('.ajax-loader').show();\r\n}\r\n\r\nfunction loaderHide() {\r\n    $('.ajax-loader').hide();\r\n}\r\n\r\n// Background color for drag & drop\r\nfunction colorSuccess(item) {\r\n    var color = item.css('background-color');\r\n    item.css('background-color', '#64c664')\r\n        .animate({'background-color': color}, 500, function () {\r\n            item.removeAttr('style');\r\n        });\r\n}\r\n\r\nfunction colorDanger(item) {\r\n    var color = item.css('background-color');\r\n    item.css('background-color', '#e71a1a')\r\n        .animate({'background-color': color}, 500, function () {\r\n            item.removeAttr('style');\r\n        });\r\n}\r\n\r\nfunction randomString(length) {\r\n    length = typeof length !== 'undefined' ? length : 8;\r\n    return Math.random().toString(36).slice(length);\r\n}\r\n\r\n// Get model (type: json | list | option)\r\nfunction getModel(model, column, type, extra) {\r\n    type = typeof type !== 'undefined' ? type : 'json';\r\n    column = typeof column !== 'undefined' ? column : '*';\r\n    var out = '';\r\n    $.ajax({\r\n        url: baseUrlAdmin + '/api/get-model',\r\n        type: 'post',\r\n        data: {\r\n            \"model\": model,\r\n            \"column\": column,\r\n            \"type\": type,\r\n            \"extra\": extra,\r\n        },\r\n        success: function (data, textStatus, jqXHR) {\r\n            out = data;\r\n        },\r\n        error: function (jqXHR, textStatus, errorThrown) {\r\n            alert('Server error.');\r\n        },\r\n        async: false\r\n    });\r\n    return out;\r\n}\r\n\r\n$(document).ready(function () {\r\n//Loads the correct sidebar on window load,\r\n//collapses the sidebar on window resize.\r\n//Sets the min-height of #page-wrapper to window size\r\n    $(window).bind(\"load resize\", function () {\r\n        topOffset = 50;\r\n        width = (this.window.innerWidth > 0) ? this.window.innerWidth : this.screen.width;\r\n        if (width < 768) {\r\n            $('div.navbar-collapse').addClass('collapse');\r\n            topOffset = 100; // 2-row-menu\r\n        } else {\r\n            $('div.navbar-collapse').removeClass('collapse');\r\n        }\r\n\r\n        height = ((this.window.innerHeight > 0) ? this.window.innerHeight : this.screen.height) - 1;\r\n        height = height - topOffset;\r\n        if (height < 1) height = 1;\r\n        if (height > topOffset) {\r\n            $(\"#page-wrapper\").css(\"min-height\", (height) + \"px\");\r\n        }\r\n    });\r\n\r\n    // Menu\r\n    var url = window.location;\r\n    var element = $('ul.nav a').filter(function () {\r\n        return this.href == url || url.href.indexOf(this.href) == 0;\r\n    }).addClass('active').parent().parent().addClass('in').parent();\r\n    if (element.is('li')) {\r\n        element.addClass('active');\r\n    }\r\n\r\n    // Sortable\r\n    $('table.sortable').sortable({\r\n        axis: 'y',\r\n        items: 'tbody tr',\r\n        handle: '.btn-sort',\r\n        forcePlaceholderSize: true,\r\n        cancel: '',\r\n        placeholder: 'sortable-placeholder',\r\n        helper: function (e, ui) {\r\n            ui.children().each(function () {\r\n                $(this).width($(this).width());\r\n            });\r\n            return ui;\r\n        },\r\n        start: function (e, ui) {\r\n            ui.item.siblings(\"tr\").has(':checkbox:checked').not(\".ui-sortable-placeholder\").appendTo(ui.item).hide();\r\n        },\r\n        stop: function (e, ui) {\r\n            var items = ui.item.find(\"tr\");\r\n            ui.item.after(items.show());\r\n            colorSuccess(items);\r\n            colorSuccess(ui.item);\r\n            $('table.sortable input:checkbox').removeAttr('checked');\r\n        }\r\n\r\n    }).bind('sortupdate', function (e, ui) {\r\n        var sort = [];\r\n        $('table.sortable tbody tr').each(function (index) {\r\n            sort[index + 1] = $(this).data('id');\r\n        });\r\n        sortRows($('table.sortable').data('model'), sort, ui.item);\r\n    });\r\n\r\n    function sortRows(model, sortData, item) {\r\n        $.ajax({\r\n            url: baseUrlAdmin + '/api/sort-rows',\r\n            type: 'post',\r\n            data: {\r\n                \"model\": model,\r\n                \"data\": sortData\r\n            },\r\n            success: function (data, textStatus, jqXHR) {\r\n            },\r\n            error: function (jqXHR, textStatus, errorThrown) {\r\n                alert('Server error.');\r\n            }\r\n        });\r\n    }\r\n\r\n    // Select2\r\n    function initSelect2() {\r\n        $('select.select2').select2(\r\n            {placeholder: \"Select a State\", maximumSelectionSize: 6}\r\n        );\r\n    }\r\n\r\n    initSelect2();\r\n\r\n    // Fancybox\r\n    function initFancyBox() {\r\n        if ($('.fancybox').length) {\r\n            $('.fancybox').fancybox({\r\n                openEffect: 'none',\r\n                closeEffect: 'none'\r\n            });\r\n        }\r\n    }\r\n\r\n    initFancyBox();\r\n\r\n    // Msg modal\r\n    if ($('#overlay-modal').length) {\r\n        $('#overlay-modal').modal();\r\n    }\r\n\r\n    // CKEditor\r\n    function initCkeditor() {\r\n        CKEDITOR.disableAutoInline = true;\r\n        if ($('#ckeditor').length) {\r\n            $('#ckeditor').ckeditor();\r\n        }\r\n    }\r\n\r\n    initCkeditor();\r\n\r\n    // Pjax\r\n    $.pjax.defaults.scrollTo = false;\r\n\r\n    $(document).on('pjax:send', function () {\r\n        loaderShow();\r\n    })\r\n    $(document).on('pjax:complete', function () {\r\n        initSelect2();\r\n        initCkeditor();\r\n        loaderHide();\r\n    })\r\n\r\n    $(document).on('submit', 'form[data-pjax]', function (event) {\r\n        var btn = $(\":input[type=submit]:focus\");\r\n        if (btn.data('pjax')) {\r\n            $.pjax.submit(event, {container: '#pjax-container', timeout: 5000});\r\n        }\r\n    })\r\n\r\n    //$(document).on('click', 'a[data-pjax]', function (e) {\r\n    //    $.pjax.click(e, {container: '#pjax-container', timeout: 5000})\r\n    //})\r\n\r\n    // Password generator\r\n    $('[data-random-string]').on('click', function (e) {\r\n        e.preventDefault();\r\n        var element = $(this).data('random-string');\r\n        $(element).val(randomString());\r\n    })\r\n\r\n    // Bootbox\r\n    $('body').on('click', '*[data-bb=\"confirm\"]', function (e) {\r\n        e.preventDefault();\r\n        var href = $(this).attr('href');\r\n        bootbox.confirm(\"Are you sure?\", function (result) {\r\n            if (result) window.location.href = href;\r\n        });\r\n    })\r\n\r\n    // File button\r\n    $('.btn-file :file').on('fileselect', function (event, numFiles, label) {\r\n        var input = $(this).parents('.input-group').find(':text');\r\n        var log = numFiles > 1 ? numFiles + ' files selected' : label;\r\n        if (input.length) {\r\n            input.val(log);\r\n        } else {\r\n            if (log) alert(log);\r\n        }\r\n    });\r\n\r\n})"],"sourceRoot":"/source/"}